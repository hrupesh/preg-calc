<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregnancy Calculator</title>
    <link rel="shortcut icon" href="./assets/icon-512.png" type="image/x-icon">
    <link rel="stylesheet" href="https://bootswatch.com/4/materia/bootstrap.min.css">
    <link rel="stylesheet" href="assets/main.css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css">

    <link rel="manifest" href="./manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Pregancy Due Date Calculator">
    <meta name="apple-mobile-web-app-title" content="Pregancy Due Date Calculator">
    <meta name="theme-color" content="#c17ae8">
    <meta name="msapplication-navbutton-color" content="#c17ae8">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" sizes="512x512" href="./assets/icon-512.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./assets/icon-512.png">
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.js"></script>
    <script src="assets/app.js"></script>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="index.html">Due Date Calculator</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02"
            aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor02">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="text" placeholder="Search">
                <button class="btn btn-outline-success my-2 mx-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>

    <section class="calculator-section">
        <div class="row">
            <div class="col-md-6 m-auto">
                <div class="card ">
                    <div class="card-header">
                        <img src="https://cdn1.iconfinder.com/data/icons/business-vivid-vol-2/256/Schedule-Plan-512.png"
                            class="cal-img" alt="" srcset="">
                        <h3 class="text-center">Due Date Calculator</h3>
                    </div>
                    <div class="card-body">
                        <p class="lead text-center">Choose from a variety of ways to predict your due date</p>

                        <div class="row my-4">
                            <div class="col-md-10 m-auto">
                                <label for="ddtype">Choose a calculation method</label>
                                <div class="form-group">
                                    <select required name="ddtype" id="ddtype" class="custom-select ">
                                        <option selected value="last_period">Last Period</option>
                                        <option value="conception_date">Conception Date</option>
                                        <option value="ivf">IVF</option>
                                        <option value="ultrasound">Ultrasound</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="ddtype_form" class="row">
                            <div class="col-md-9 m-auto">
                                <label for="ddtype">First Day of your last period</label>
                                <input type="text" class="form-control" readonly data-type="date" id="date-input" />
                                <div id="material-header-holder" style="display:none;">
                                    <div class="ui-datepicker-material-header">
                                        <div class="ui-datepicker-material-day">
                                        </div>
                                        <div class="ui-datepicker-material-date">
                                            <div class="ui-datepicker-material-month">
                                            </div>
                                            <div class="ui-datepicker-material-day-num">
                                            </div>
                                            <div class="ui-datepicker-material-year">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row my-4">
                            <div class="col-md-10 m-auto">
                                <button class="btn btn-block btn-primary" onclick="calculate()"> Calculate my Due Date
                                </button>

                            </div>
                        </div>

                        <script>
                            var headerHtml = $("#material-header-holder .ui-datepicker-material-header");
                            var changeMaterialHeader = function (header, date) {
                                var year = date.format("YYYY");
                                var month = date.format("MMM");
                                var dayNum = date.format("D");
                                var isoDay = date.isoWeekday();

                                var weekday = new Array(7);
                                weekday[1] = "Monday";
                                weekday[2] = "Tuesday";
                                weekday[3] = "Wednesday";
                                weekday[4] = "Thursday";
                                weekday[5] = "Friday";
                                weekday[6] = "Saturday";
                                weekday[7] = "Sunday";

                                $(".ui-datepicker-material-day", header).text(weekday[isoDay]);
                                $(".ui-datepicker-material-year", header).text(year);
                                $(".ui-datepicker-material-month", header).text(month);
                                $(".ui-datepicker-material-day-num", header).text(dayNum);
                            };

                            $.datepicker._selectDateOverload = $.datepicker._selectDate;
                            $.datepicker._selectDate = function (id, dateStr) {
                                var target = $(id);
                                var inst = this._getInst(target[0]);
                                inst.inline = true;
                                $.datepicker._selectDateOverload(id, dateStr);
                                inst.inline = false;
                                this._updateDatepicker(inst);

                                headerHtml.remove();
                                $(".ui-datepicker").prepend(headerHtml);
                            };

                            $("input[data-type='date']").on("focus", function () {
                                //var date;
                                //if (this.value == "") {
                                //  date = moment();
                                //} else {
                                //  date = moment(this.value, 'MM/DD/YYYY');
                                //}

                                $(".ui-datepicker").prepend(headerHtml);
                                //$(this).datepicker._selectDate(this, date);
                            });

                            $("input[data-type='date']").datepicker({
                                // showButtonPanel: true,
                                showAnim: 'clip',
                                minDate: "-9M",
                                maxDate: "+1M",
                                showWeek: true,
                                firstDay: 1,
                                closeText: "OK",
                                onSelect: function (date, inst) {
                                    changeMaterialHeader(headerHtml, moment(date, "MM/DD/YYYY"));
                                }
                            });

                            changeMaterialHeader(headerHtml, moment());
                            // $("#date-input").datepicker("show");
                        </script>


                    </div>
                </div>
            </div>
        </div>

    </section>

    <div id="result" class="result-box">
        <div class="row">
            <div class="col-md-12 m-auto">
                <div class="result-img">
                    <div class="cross" id="cross" onclick="$('#result').css('display','none');"> ‚ùå </div>
                    <div class="float-right result-text">
                        Your Due Date <br> is around
                        <div class="c-due-date" id="c-due-date">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="bar">
                    <span class="bar-progress" id="progress-bar"></span>
                    <div class="row text-center ">
                        <span class="col bar-text" id="f-t-date">1st Trimester <br> Ends at </span>
                        
                        <span class=" tr-line"> </span>
                        <span class="col bar-text" id="s-t-date">2nd Trimester <br> Ends at </span>
                        
                        <span class=" tr-line"> </span>
                        <span class="col bar-text" id="t-t-date">3rd Trimester <br> Ends at </span>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').then(registration => {
                    // console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    // console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>

</body>

</html>